{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-card" style="text-align:center;">
    <h2>Welcome, {{ user.name }} ðŸ‘‹</h2>
    <div class="info-box" style="margin-top:15px;">
      <p><strong>Role:</strong> {{ user.role }}</p>
      {% if user.sub_role %}
        <p><strong>Sub Role:</strong> {{ user.sub_role }}</p>
      {% endif %}
    </div>
    <div class="button-group" style="margin-top:25px;">
      <a href="{{ url_for('form_step1') }}" class="primary-btn">ðŸ§¾ Start Allocation</a>
      <a href="{{ url_for('logout') }}" class="secondary-btn">ðŸšª Logout</a>
    </div>
  </div>
</div>

{% if recent_allocations %}
<div class="auth-container">
  <div class="auth-card" style="width:700px;">
    <h3 style="margin-bottom:15px;color:#004aad;">ðŸ“‹ Recent Allocations</h3>

    <table style="width:100%; font-size:0.9rem; border-collapse:collapse;">
      <tr style="background:#f2f6ff;">
        <th>Date</th>
        <th>Shift</th>
        <th>Station</th>
        <th>Operator</th>
        <th>Time</th>
      </tr>

      {% for row in recent_allocations %}
      <tr>
        <td>{{ row[0] }}</td>
        <td>{{ row[1] }}</td>
        <td>{{ row[2] }}</td>
        <td>{{ row[3] }}</td>
        <td>{{ row[4] }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
{% endif %}
{% endblock %}
